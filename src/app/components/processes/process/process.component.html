<div class="app-container-fluid app-process app-h-100" *ngIf="process">
  <div fxLayout="row" fxLayoutGap="16px" fxFlexFill>
    <div class="app-left">
      <mat-card class="app-card app-view-border app-mb-4">
        <mat-card-header>
          <mat-card-title>Proces</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="app-badge app-mb-4" [ngClass]="batch.getStateClass()">{{ process.getStateLabel() }}</div>
          <div *ngIf="process.planned" class="app-mb-4">
            <div class="app-label">Naplánován</div>
            <div>{{ process.planned | appDatetime }}</div>
          </div>
          <div *ngIf="process.started" class="app-mb-4">
            <div class="app-label">Spuštěn</div>
            <div>{{ process.started | appDatetime }}</div>
          </div>
          <div *ngIf="process.finished" class="app-mb-4">
            <div class="app-label">Ukončen</div>
            <div>{{ process.finished | appDatetime }}</div>
          </div>
          <div *ngIf="process.getDuration(loadedTimestamp)">
            <div class="app-label">Trvání</div>
            <div>{{ process.getDuration(loadedTimestamp) | appDuration }}</div>
          </div>
        </mat-card-content>
      </mat-card>
      <mat-card class="app-card app-view-border">
        <mat-card-header>
          <mat-card-title>Dávka</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="app-badge app-mb-4" [ngClass]="batch.getStateClass()">{{ batch.getStateLabel() }}</div>
          <div *ngIf="process.planned" class="app-mb-4">
            <div class="app-label">Naplánována</div>
            <div>{{ batch.planned | appDatetime }}</div>
          </div>
          <div *ngIf="process.started" class="app-mb-4">
            <div class="app-label">Spuštěna</div>
            <div>{{ batch.started | appDatetime }}</div>
          </div>
          <div *ngIf="process.finished" class="app-mb-4">
            <div class="app-label">Ukončena</div>
            <div>{{ batch.finished | appDatetime }}</div>
          </div>
          <div *ngIf="process.getDuration(loadedTimestamp)">
            <div class="app-label">Trvání</div>
            <div>{{ batch.getDuration(loadedTimestamp) | appDuration }}</div>
          </div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-flat-button *ngIf="batch.isKillable()" (click)="onKill(batch)" color="primary">Zastavit</button>
          <button mat-flat-button *ngIf="batch.isDeletable()" (click)="onRemove(batch)" color="primary">Smazat</button>
        </mat-card-actions>
      </mat-card>
    </div>
    <mat-card fxFlex class="app-right" class="app-card app-view-border">
      <mat-tab-group mat-align-tabs="start" fxLayout="column" fxFlexFill animationDuration="0ms">
        <mat-tab label="Standardní výstup">
          <app-process-logs [process]="process" [logType]="'out'" [urlOutUrl]="logOutUrl()"></app-process-logs>
        </mat-tab>
        <mat-tab label="Chybový výstup">
          <app-process-logs [process]="process" [logType]="'err'" [urlOutUrl]="logErrUrl()"></app-process-logs>
        </mat-tab>
      </mat-tab-group>
    </mat-card>
  </div>
</div>