<div class="app-container-fluid app-process app-h-100" *ngIf="process">
  <div fxLayout="row" fxLayoutGap="16px" fxFlexFill>
    <div class="app-left">
      <mat-card class="app-card app-view-border app-mb-4">
        <mat-card-header>
          <mat-card-title>Proces</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="app-badge app-mb-4" [ngClass]="batch.getStateClass()">{{ process.getStateLabel() }}</div>
          <div *ngIf="process.planned" class="app-mb-4">
            <div class="app-label">Naplánován</div>
            <div>{{ process.planned | appDatetime }}</div>
          </div>
          <div *ngIf="process.started" class="app-mb-4">
            <div class="app-label">Spuštěn</div>
            <div>{{ process.started | appDatetime }}</div>
          </div>
          <div *ngIf="process.finished" class="app-mb-4">
            <div class="app-label">Ukončen</div>
            <div>{{ process.finished | appDatetime }}</div>
          </div>
          <div *ngIf="process.getDuration(loadedTimestamp)">
            <div class="app-label">Trvání</div>
            <div>{{ process.getDuration(loadedTimestamp) | appDuration }}</div>
          </div>
        </mat-card-content>
      </mat-card>
      <mat-card class="app-card app-view-border">
        <mat-card-header>
          <mat-card-title>Dávka</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="app-badge app-mb-4" [ngClass]="batch.getStateClass()">{{ batch.getStateLabel() }}</div>
          <div *ngIf="process.planned" class="app-mb-4">
            <div class="app-label">Naplánována</div>
            <div>{{ batch.planned | appDatetime }}</div>
          </div>
          <div *ngIf="process.started" class="app-mb-4">
            <div class="app-label">Spuštěna</div>
            <div>{{ batch.started | appDatetime }}</div>
          </div>
          <div *ngIf="process.finished" class="app-mb-4">
            <div class="app-label">Ukončena</div>
            <div>{{ batch.finished | appDatetime }}</div>
          </div>
          <div *ngIf="process.getDuration(loadedTimestamp)">
            <div class="app-label">Trvání</div>
            <div>{{ batch.getDuration(loadedTimestamp) | appDuration }}</div>
          </div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-flat-button *ngIf="batch.isKillable()" (click)="onKill(batch)" color="primary">Zastavit</button>
          <button mat-flat-button *ngIf="batch.isDeletable()" (click)="onRemove(batch)" color="primary">Smazat</button>
        </mat-card-actions>
      </mat-card>
    </div>
    <mat-card fxFlex class="app-right" class="app-card app-view-border">
      <mat-tab-group mat-align-tabs="start" fxLayout="column" fxFlexFill animationDuration="0ms">
        <mat-tab label="Standardní výstup">
          <app-process-logs [process]="process" [logType]="'out'" [urlOutUrl]="logOutUrl()"></app-process-logs>
        </mat-tab>
        <mat-tab label="Chybový výstup">
          <app-process-logs [process]="process" [logType]="'err'" [urlOutUrl]="logErrUrl()"></app-process-logs>
        </mat-tab>
      </mat-tab-group>
    </mat-card>
  </div>
</div>


<!-- <div class="app-process" *ngIf="process">

  <h2>{{process.name}}</h2>

  <div class="app-cards-left">

    <mat-card class="app-card">
      <div class="app-card-header">Proces</div>
      <div class="app-state">
        <div class="app-state-label" [style.backgroundColor]="process.getStateColor()">{{ process.getStateLabel() }}
        </div>
      </div>
      <div *ngIf="process.planned">
        <div class="app-card-content-label">Naplánován</div>
        <div class="app-card-content-value">{{process.planned | appDatetime}}</div>
      </div>
      <div *ngIf="process.started">
        <div class="app-card-content-label">Spuštěn</div>
        <div class="app-card-content-value">{{process.started | appDatetime}}</div>
      </div>
      <div *ngIf="process.finished">
        <div class="app-card-content-label">Ukončen</div>
        <div class="app-card-content-value">{{process.finished | appDatetime}}</div>
      </div>
      <div *ngIf="process.getDuration(loadedTimestamp)">
        <div class="app-card-content-label">Trvání</div>
        <div class="app-card-content-value">{{process.getDuration(loadedTimestamp) | appDuration}}</div>
      </div>
    </mat-card>

    <mat-card class="app-card">
      <div class="app-card-header">Dávka</div>
      <div class="app-state">
        <div class="app-state-label" [style.backgroundColor]="batch.getStateColor()">{{ batch.getStateLabel() }}
        </div>
      </div>
      <div *ngIf="batch.planned">
        <div class="app-card-content-label">Naplánována</div>
        <div class="app-card-content-value">{{batch.planned | appDatetime}}</div>
      </div>
      <div *ngIf="batch.started">
        <div class="app-card-content-label">Spuštěna</div>
        <div class="app-card-content-value">{{batch.started | appDatetime}}</div>
      </div>
      <div *ngIf="batch.finished">
        <div class="app-card-content-label">Ukončena</div>
        <div class="app-card-content-value">{{batch.finished | appDatetime}}</div>
      </div>
      <div *ngIf="batch.getDuration(loadedTimestamp)">
        <div class="app-card-content-label">Trvání</div>
        <div class="app-card-content-value">{{batch.getDuration(loadedTimestamp) | appDuration}}</div>
      </div>
      <mat-card-actions>
        <button mat-button *ngIf="batch.isKillable()" (click)="onKill(batch)">Zastavit</button>
        <button mat-button *ngIf="batch.isDeletable()" (click)="onRemove(batch)">Smazat</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="app-tabs">
    <div class="app-tabs-headers">
      <div class="app-tabs-header" [class.app-tabs-active]="log=='out'" (click)="log='out'">Standardní výstup
        <a class="action-btn" mat-icon-button color="default" matTooltip="Stáhnout celý standardní výstup"
          href="{{logOutUrl()}}" download="{{logOutFilename()}}" [disabled]="!canDownloadLog()">
          <mat-icon>get_app</mat-icon>
        </a>
      </div>
      <div class="app-tabs-header" [class.app-tabs-active]="log=='err'" (click)="log='err'">Chybový výstup
        <a class="action-btn" mat-icon-button color="default" matTooltip="Stáhnout celý chybový výstup"
          href="{{logErrUrl()}}" download="{{logErrFilename()}}" [disabled]="!canDownloadLog()">
          <mat-icon>get_app</mat-icon>
        </a>
      </div>
    </div>
    <div class="app-tabs-content">
      <app-process-logs *ngIf="log=='out'" [process]="process" [logType]="'out'"></app-process-logs>
      <app-process-logs *ngIf="log=='err'" [process]="process" [logType]="'err'"></app-process-logs>
    </div>
  </div>
</div> -->